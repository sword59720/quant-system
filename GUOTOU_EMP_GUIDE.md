# å›½æŠ•è¯åˆ¸ EMP ç­–ç•¥æ‰˜ç®¡å¹³å°æ¥å…¥æŒ‡å—

## ğŸ¯ EMP å¹³å°ç®€ä»‹

å›½æŠ•è¯åˆ¸ **EMP (Strategy Hosting Platform)** æ˜¯ä¸“ä¸ºé‡åŒ–æŠ•èµ„è€…è®¾è®¡çš„ç­–ç•¥æ‰˜ç®¡æœåŠ¡å¹³å°ï¼š

| æœåŠ¡ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **AlphaTç­–ç•¥** | T0ç®—æ³• - è‡ªåŠ¨æ—¥å†…å›è½¬äº¤æ˜“ï¼ˆåšTï¼‰ | å·²æœ‰åº•ä»“ï¼Œè·å–æ—¥å†…ä»·å·®æ”¶ç›Š |
| **ACTç­–ç•¥** | ç®—æ³•äº¤æ˜“ - æ™ºèƒ½æ‹†å•æ‰§è¡Œ | å¤§å•æ‰§è¡Œã€é™ä½å¸‚åœºå†²å‡» |
| **ç­–ç•¥æ‰˜ç®¡** | å°†ç­–ç•¥ç¨‹åºéƒ¨ç½²åœ¨å›½æŠ•æœåŠ¡å™¨è¿è¡Œ | é«˜é¢‘ç­–ç•¥ã€ä½å»¶è¿Ÿè¦æ±‚ |

---

## ğŸ“‹ æ¥å…¥æ–¹å¼é€‰æ‹©

### æ–¹å¼ä¸€ï¼šä¿¡å·åŒæ­¥æ¨¡å¼ï¼ˆæ¨èï¼‰

**å·¥ä½œåŸç†**ï¼š
- quant-system åœ¨æœ¬åœ°/äº‘ç«¯è¿è¡Œï¼Œç”Ÿæˆç›®æ ‡ä»“ä½
- é€šè¿‡APIå°†äº¤æ˜“ä¿¡å·æ¨é€åˆ°EMPå¹³å°
- EMPå¹³å°æ‰§è¡Œå®é™…ä¸‹å•ï¼ˆå¯ä½¿ç”¨AlphaT/ACTç®—æ³•ï¼‰

**ä¼˜åŠ¿**ï¼š
- ç­–ç•¥ä»£ç è‡ªä¸»å¯æ§
- å¯çµæ´»åˆ‡æ¢ç®—æ³•ï¼ˆAlphaT/ACT/æ™®é€šï¼‰
- æœ¬åœ°æ•°æ®å¤„ç†å’Œç­–ç•¥è®¡ç®—

**é…ç½®**ï¼š`hosting_mode: signal`

---

### æ–¹å¼äºŒï¼šç­–ç•¥æ‰˜ç®¡æ¨¡å¼

**å·¥ä½œåŸç†**ï¼š
- å°† quant-system ç­–ç•¥ä»£ç éƒ¨ç½²åˆ°EMPæœåŠ¡å™¨
- ç­–ç•¥åœ¨å›½æŠ•æœºæˆ¿å†…è¿è¡Œï¼Œå»¶è¿Ÿæä½
- ç›´æ¥è°ƒç”¨äº¤æ˜“æ¥å£

**ä¼˜åŠ¿**ï¼š
- ç½‘ç»œå»¶è¿Ÿæœ€ä½
- é€‚åˆé«˜é¢‘ã€T0ç­–ç•¥
- æœºæˆ¿çº§ç¨³å®šæ€§

**é…ç½®**ï¼š`hosting_mode: hosted`

---

## ğŸš€ æ¥å…¥æ­¥éª¤

### æ­¥éª¤ 1: è”ç³»å›½æŠ•å¼€é€šEMPæƒé™

è”ç³»æ‚¨çš„å®¢æˆ·ç»ç†ï¼Œç”³è¯·å¼€é€šï¼š
- [ ] EMPç­–ç•¥æ‰˜ç®¡å¹³å°æƒé™
- [ ] AlphaT T0ç®—æ³•æƒé™ï¼ˆå¦‚éœ€ï¼‰
- [ ] ACTç®—æ³•äº¤æ˜“æƒé™ï¼ˆå¦‚éœ€ï¼‰
- [ ] APIæ¥å£æ–‡æ¡£å’ŒSDK

**é€šå¸¸éœ€è¦æä¾›**ï¼š
- èµ„é‡‘è´¦å·
- èµ„äº§è§„æ¨¡ï¼ˆé€šå¸¸50ä¸‡ä»¥ä¸Šï¼‰
- ç­–ç•¥è¯´æ˜æ–‡æ¡£
- é£é™©æµ‹è¯„

---

### æ­¥éª¤ 2: é€‰æ‹©æ¥å…¥æ–¹å¼

æ ¹æ®æ‚¨çš„ç­–ç•¥ç‰¹ç‚¹é€‰æ‹©ï¼š

| ç­–ç•¥ç±»å‹ | æ¨èæ–¹å¼ | ç†ç”± |
|----------|----------|------|
| å‘¨é¢‘/æœˆé¢‘ETFè½®åŠ¨ | ä¿¡å·åŒæ­¥ | è°ƒä»“é¢‘ç‡ä½ï¼Œæœ¬åœ°è¿è¡Œè¶³å¤Ÿ |
| æ—¥é¢‘å¤šå› å­é€‰è‚¡ | ä¿¡å·åŒæ­¥ | éœ€è¦æœ¬åœ°æ•°æ®å¤„ç† |
| T0æ—¥å†…ç­–ç•¥ | ç­–ç•¥æ‰˜ç®¡ | ä½å»¶è¿Ÿè¦æ±‚ |
| é«˜é¢‘å¥—åˆ© | ç­–ç•¥æ‰˜ç®¡ | æœºæˆ¿çº§ä½å»¶è¿Ÿ |

---

### æ­¥éª¤ 3: é…ç½® broker.yaml

#### ä¿¡å·åŒæ­¥æ¨¡å¼é…ç½®

```yaml
guotou:
  name: "å›½æŠ•è¯åˆ¸"
  platform: "emp"
  account_id: "æ‚¨çš„èµ„é‡‘è´¦å·"
  api_key: "æ‚¨çš„API Key"
  api_secret: "æ‚¨çš„API Secret"
  api_endpoint: "https://emp.essence.com.cn/api"  # EMP APIç«¯ç‚¹
  
  emp:
    hosting_mode: "signal"   # ä¿¡å·åŒæ­¥æ¨¡å¼
    use_alphat: false        # ETFè½®åŠ¨ä¸é€‚åˆT0
    use_act: true            # ä½¿ç”¨ç®—æ³•äº¤æ˜“æ‹†å•
    
    act:
      enabled: true
      algo_type: "TWAP"      # æ—¶é—´åŠ æƒå¹³å‡ä»·
      participation_rate: 0.1
      urgency: "normal"
    
    signal_sync:
      push_interval: 60
      batch_orders: true
```

#### ç­–ç•¥æ‰˜ç®¡æ¨¡å¼é…ç½®

```yaml
guotou:
  name: "å›½æŠ•è¯åˆ¸"
  platform: "emp"
  account_id: "æ‚¨çš„èµ„é‡‘è´¦å·"
  
  emp:
    hosting_mode: "hosted"   # ç­–ç•¥æ‰˜ç®¡æ¨¡å¼
    use_alphat: false
    use_act: false
```

**æ³¨æ„**ï¼šæ‰˜ç®¡æ¨¡å¼ä¸‹ï¼Œéœ€è¦å°†ä»£ç éƒ¨ç½²åˆ°EMPæœåŠ¡å™¨ï¼Œé…ç½®ç®€åŒ–ã€‚

---

### æ­¥éª¤ 4: å®ç°EMP APIå¯¹æ¥

æ ¹æ®å›½æŠ•æä¾›çš„APIæ–‡æ¡£ï¼Œä¿®æ”¹ `adapters/guotou_trader.py`ï¼š

#### ä¿¡å·åŒæ­¥æ¨¡å¼ç¤ºä¾‹

```python
def place_order(self, order: Order) -> Order:
    """é€šè¿‡EMP APIä¸‹å•"""
    
    # æ„å»ºEMPè®¢å•è¯·æ±‚
    payload = {
        "account_id": self.account_id,
        "symbol": order.symbol,
        "side": order.side.value,
        "amount": order.amount,
        "algorithm": "ACT" if self.use_act else "MARKET",
        "algo_params": {
            "type": self.emp_config.get("act", {}).get("algo_type", "TWAP"),
            "participation_rate": self.emp_config.get("act", {}).get("participation_rate", 0.1)
        }
    }
    
    # å‘é€åˆ°EMPå¹³å°
    response = requests.post(
        f"{self.api_endpoint}/v1/orders",
        headers={"Authorization": f"Bearer {self.token}"},
        json=payload
    )
    
    result = response.json()
    order.order_id = result["order_id"]
    order.status = OrderStatus.SUBMITTED
    
    return order
```

#### AlphaT T0ç®—æ³•ç¤ºä¾‹

```python
def enable_alphat(self, symbols: List[str]):
    """ä¸ºæŒ‡å®šæ ‡çš„å¼€å¯AlphaT T0ç®—æ³•"""
    
    # T0ç®—æ³•éœ€è¦å·²æœ‰åº•ä»“
    payload = {
        "account_id": self.account_id,
        "symbols": symbols,
        "strategy": "AlphaT",
        "params": {
            "profit_target": 0.005,    # 0.5%æ­¢ç›ˆ
            "stop_loss": 0.003,        # 0.3%æ­¢æŸ
            "max_daily_trades": 10
        }
    }
    
    response = requests.post(
        f"{self.api_endpoint}/v1/alphat/enable",
        headers={"Authorization": f"Bearer {self.token}"},
        json=payload
    )
    
    return response.json()
```

---

### æ­¥éª¤ 5: æµ‹è¯•ä¸ä¸Šçº¿

#### 1. æ¨¡æ‹Ÿæµ‹è¯•

```bash
cd /home/haojc/.openclaw/workspace/quant-system
./.venv/bin/python scripts/trade_all.py --dry-run
```

#### 2. EMPæ²™ç®±æµ‹è¯•

è”ç³»å›½æŠ•ç”³è¯·EMPæµ‹è¯•ç¯å¢ƒï¼ŒéªŒè¯APIå¯¹æ¥ã€‚

#### 3. å°èµ„é‡‘å®ç›˜

```bash
# ä¿®æ”¹ runtime.yamlï¼Œè®¾ç½®å°é¢èµ„é‡‘
nano config/runtime.yaml
# total_capital: 10000

# æ‰§è¡Œå®ç›˜ï¼ˆä¼šè¿æ¥åˆ°EMPå¹³å°ï¼‰
./.venv/bin/python scripts/trade_all.py
```

---

## âš ï¸ ç‰¹åˆ«æ³¨æ„äº‹é¡¹

### AlphaT T0ç®—æ³•

1. **éœ€è¦åº•ä»“**ï¼šT0ç®—æ³•å¿…é¡»åœ¨å·²æœ‰æŒä»“çš„åŸºç¡€ä¸Šè¿è¡Œ
2. **èµ„é‡‘è¦æ±‚**ï¼šé€šå¸¸éœ€è¦50ä¸‡ä»¥ä¸Šèµ„äº§
3. **æ ‡çš„é™åˆ¶**ï¼šä»…æ”¯æŒéƒ¨åˆ†è‚¡ç¥¨ï¼ˆé€šå¸¸æ’é™¤STã€æ¬¡æ–°è‚¡ç­‰ï¼‰
4. **æ”¶ç›Šæ¥æº**ï¼šæ—¥å†…ä»·å·®ï¼Œä¸æ”¹å˜æ€»æŒä»“

### ACT ç®—æ³•äº¤æ˜“

1. **é€‚åˆåœºæ™¯**ï¼šå¤§å•æ‰§è¡Œã€é™ä½å†²å‡»æˆæœ¬
2. **ç®—æ³•é€‰æ‹©**ï¼š
   - **TWAP**ï¼šæ—¶é—´åŠ æƒï¼Œå‡åŒ€æ‰§è¡Œ
   - **VWAP**ï¼šæˆäº¤é‡åŠ æƒï¼Œè·Ÿéšå¸‚åœº
   - **POV**ï¼šå›ºå®šå‚ä¸ç‡
3. **æ‰§è¡Œæ—¶é—´**ï¼šå¯èƒ½æŒç»­æ•°åˆ†é’Ÿåˆ°æ•°å°æ—¶

### ç­–ç•¥æ‰˜ç®¡æ¨¡å¼

1. **ä»£ç å®¡æ ¸**ï¼šEMPå¯èƒ½éœ€è¦å®¡æ ¸ç­–ç•¥ä»£ç 
2. **è¿è¡Œç¯å¢ƒ**ï¼šå—é™äºEMPæä¾›çš„Python/åº“ç‰ˆæœ¬
3. **æ•°æ®æ¥å…¥**ï¼šä½¿ç”¨EMPæä¾›çš„è¡Œæƒ…æ•°æ®æº

---

## ğŸ“Š ä¸åŒç­–ç•¥çš„é…ç½®å»ºè®®

### ETFè½®åŠ¨ç­–ç•¥ï¼ˆquant-systemå½“å‰ç­–ç•¥ï¼‰

```yaml
emp:
  hosting_mode: "signal"
  use_alphat: false        # ä¸é€‚åˆT0
  use_act: true            # ç”¨ç®—æ³•äº¤æ˜“æ‰§è¡Œè°ƒä»“
  
  act:
    algo_type: "TWAP"
    participation_rate: 0.2    # ETFæµåŠ¨æ€§å¥½ï¼Œå¯æé«˜å‚ä¸ç‡
    urgency: "normal"
```

### è‚¡ç¥¨å¤šå› å­ç­–ç•¥

```yaml
emp:
  hosting_mode: "signal"
  use_alphat: true         # å¼€å¯T0å¢å¼ºæ”¶ç›Š
  use_act: true
  
  alphat:
    enabled: true
    profit_target: 0.005
    stop_loss: 0.003
  
  act:
    algo_type: "VWAP"      # è‚¡ç¥¨ç”¨VWAPæ›´åˆé€‚
    participation_rate: 0.1
```

### é«˜é¢‘ç­–ç•¥

```yaml
emp:
  hosting_mode: "hosted"   # å¿…é¡»æ‰˜ç®¡
  use_alphat: false
  use_act: false           # ç›´æ¥ä¸‹å•ï¼Œä¸ç”¨ç®—æ³•
```

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: AlphaTå’ŒACTå¯ä»¥åŒæ—¶ä½¿ç”¨å—ï¼Ÿ
A: å¯ä»¥ã€‚AlphaTç”¨äºæ—¥å†…T0ï¼ŒACTç”¨äºè°ƒä»“æ‰§è¡Œï¼Œä¸¤è€…äº’è¡¥ã€‚

### Q: EMPå¹³å°æ”¶è´¹å—ï¼Ÿ
A: é€šå¸¸æŒ‰äº¤æ˜“é‡æˆ–å¢å€¼æ”¶ç›Šåˆ†æˆæ”¶è´¹ï¼Œå…·ä½“å’¨è¯¢å®¢æˆ·ç»ç†ã€‚

### Q: å¦‚ä½•ç›‘æ§EMPè®¢å•çŠ¶æ€ï¼Ÿ
A: å¯é€šè¿‡APIè½®è¯¢æˆ–è®¾ç½®Webhookå›è°ƒæ¥æ”¶çŠ¶æ€æ›´æ–°ã€‚

### Q: ç­–ç•¥æ‰˜ç®¡åè¿˜èƒ½ä¿®æ”¹å—ï¼Ÿ
A: å¯ä»¥ï¼Œä½†éœ€è¦é‡æ–°éƒ¨ç½²ï¼Œé€šå¸¸æœ‰å®¡æ ¸æµç¨‹ã€‚

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **å›½æŠ•è¯åˆ¸å®¢æœ**ï¼š95517
- **EMPæŠ€æœ¯æ”¯æŒ**ï¼šè”ç³»æ‚¨çš„å®¢æˆ·ç»ç†è·å–ä¸“çº¿
- **quant-systemé—®é¢˜**ï¼šæŸ¥çœ‹ `README.md` æˆ–æ—¥å¿—

---

## âœ… æ¥å…¥æ£€æŸ¥æ¸…å•

- [ ] å·²å¼€é€šEMPå¹³å°æƒé™
- [ ] å·²é€‰æ‹©æ¥å…¥æ–¹å¼ï¼ˆsignal/hostedï¼‰
- [ ] å·²è·å–APIæ–‡æ¡£å’ŒSDK
- [ ] å·²é…ç½® `config/broker.yaml`
- [ ] å·²å®ç° `adapters/guotou_trader.py` ä¸­çš„APIè°ƒç”¨
- [ ] å·²åœ¨æ²™ç®±ç¯å¢ƒæµ‹è¯•é€šè¿‡
- [ ] å·²å®Œæˆå°èµ„é‡‘å®ç›˜éªŒè¯
- [ ] å·²é…ç½®ç›‘æ§æŠ¥è­¦

---

**å‡†å¤‡å¥½åï¼Œå³å¯é€šè¿‡EMPå¹³å°å®ç°å®ç›˜è‡ªåŠ¨äº¤æ˜“ï¼**
